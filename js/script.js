'use strict';var shareswitch=0,navState=[null,!1],views=[],extraswitch=0,myLineChart2={},myLineChart3={},myLineChart4={},vids=5,loadingList=[],loadingInterval=null;if(!developmentMode)try{(window.top!==window.self||window.top.location!==window.self.location)&&(window.top.location=window.self.location)}catch(d){noConnection(d)}function idClickListener(d,g){document.getElementById(d).addEventListener('click',g)}function queryClickListener(d,g){var h=document.querySelectorAll(d);h.forEach(function(m){m.addEventListener('click',g)})}function fx(d){var g=document.getElementById(d),h=1e3/60;return fx.xnor=function(m,o){return m&&o||!m&&!o},fx.transition=function(m,o,p,q,r){var u=Date.now(),w=p*Math.round((u-q)/h);fx.xnor(o>m,o>m+w)?(r(m+w),'function'==typeof window.requestAnimationFrame?requestAnimationFrame(function(){fx.transition(m+w,o,p,u,r)}):setTimeout(function(){fx.transition(m+w,o,p,u,r)},h)):r(o)},fx.fadeIn=function(m){if('none'===window.getComputedStyle(g).getPropertyValue('display')){m=def(m,400);var o;g.dataset.fxOpacity=o=+(g.dataset.fxOpacity||g.style.opacity||1),g.style.display=g.dataset.fxDisplay?g.dataset.fxDisplay:'block',fx.transition(0,o,o*h/m,Date.now(),function(p){g.style.opacity=p})}},fx.fadeOut=function(m){if('none'!==window.getComputedStyle(g).getPropertyValue('display')){m=def(m,400);var o;g.dataset.fxOpacity=o=+(g.dataset.fxOpacity||g.style.opacity||1),g.dataset.fxDisplay=window.getComputedStyle(g).getPropertyValue('display'),fx.transition(o,0,-1*o*h/m,Date.now(),function(p){g.style.opacity=p}),setTimeout(function(){g.style.display='none'},m)}},fx}var emailParts=['manas.khurana20','gmail','com','&#46;','&#64;'];document.getElementById('email').innerHTML=emailParts[0]+emailParts[4]+emailParts[1]+emailParts[3]+emailParts[2],document.getElementById('email').href='mailto:'+getText('email');var clickList=[['inputButton',function(){getValue()}],['fb',function(){window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(getText(document.querySelector('#pageUrl input'))),'_blank')}],['tw',function(){window.open('https://twitter.com/share?text='+getText('username')+' now has  '+actualCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',')+' subscribers!&url= '+encodeURIComponent(getText(document.querySelector('#pageUrl input')))+'&hashtags=YouCount','_blank')}],['lnkdIn',function(){window.open('https://www.linkedin.com/shareArticle?mini=true&url='+encodeURIComponent(getText(document.querySelector('#pageUrl input')))+'&title='+encodeURIComponent(channelname)+'\'s%20Live%20Subscriber%20Count&source=YouCount','_blank')}],['tb',function(){window.open('http://www.tumblr.com/share/link?url='+encodeURIComponent(getText(document.querySelector('#pageUrl input'))),'_blank')}],['rdit',function(){window.open('http://www.reddit.com/submit?url='+encodeURIComponent(getText(document.querySelector('#pageUrl input')))+'&title='+encodeURIComponent(channelname)+'s%20Live%20Subscriber%20Count','_blank')}],['link',linkshare],['bg2',function(){isTutorialOn[0]?tutorial(3):(fx('pageUrl').fadeOut(250),fx('bg2').fadeOut(500))}]];clickList.forEach(function(d){idClickListener(d[0],d[1])}),queryClickListener('.suggest',function(d){if(internet&&d.target.dataset.id&&-1===['Loading.','Loading..','Loading...'].indexOf(d.target.innerHTML)){username=d.target.dataset.id;var g='https://www.googleapis.com/youtube/v3/channels?part=snippet&id='+d.target.dataset.id+'&fields=items/snippet&type=channel&maxResults=1&key=';isTutorialOn[0]&&tutorial(3),queryName(g)}}),['showextra','hideextra'].forEach(function(d){idClickListener(d,extrabutton)});function tutorial(d){function g(q){q?(fx('tutorial').fadeIn(),fx('bg2').fadeIn()):(fx('tutorial').fadeOut(),fx('bg2').fadeOut())}function h(q){var r=q?['1004','1004']:['50','51'];document.getElementById('input').style.zIndex=r[0],document.getElementById('suggest').style.zIndex=r[1]}function m(q){var r=1==q?2:1;document.getElementById('tutStep'+q).style.display='block',document.getElementById('tutStep'+r).style.display='none'}function o(q){var r=document.getElementById(q).getBoundingClientRect().bottom;document.getElementById('tutorial').style.top=r+35+'px'}var p={isChanging:!1,change:function change(){!p.isChanging&&isTutorialOn[0]&&(p.isChanging=!0,tutorial(isTutorialOn[1]-1),setTimeout(function(){p.isChanging=!1},100))}};switch(navState[0]&&handleNavButtons(navState[0]),isTutorialOn=[1,d+1],window.scrollTo(0,0),d){case 0:g(!0),h(!0),m(1),o('username'),changeText('username',''),isLive||changeText('actualCount','Tutorial'),document.getElementById('tutorial').addEventListener('click',function(){1===isTutorialOn[1]&&document.getElementById('username').focus()}),window.onresize=p.change;break;case 1:m(2),o('username');break;case 2:m(2),o('suggest');break;case 3:g(!1),h(!1),changeText('username',channelname),isTutorialOn=[0,0],document.getElementById('tutorial').onclick=null,window.onresize=null;break;default:isTutorialOn=[0,0],document.getElementById('tutorial').onclick=null,window.onresize=null;}}isTutorialOn[0]&&tutorial(0);function shareFunc(){if(1!=shareswitch){var d=200,g=document.querySelectorAll('.share');switch(shareswitch){case 0:shareswitch=1,g.forEach(function(h,m){setTimeout(function(){fx(h.id).fadeIn(d)},40*(m+1))}),setTimeout(function(){shareswitch=2,queryClickListener('body',shareFunc),navState[1]=!1},d+40*g.length);break;case 2:shareswitch=1,navState[0]=null,g.forEach(function(h){fx(h.id).fadeOut(d)}),setTimeout(function(){shareswitch=0,document.body.removeEventListener('click',shareFunc),navState[1]=!1},d);break;default:}}}var storeScrollY=0;function handleNavButtons(d){if(!navState[1])if(null!==navState[0]){if(navState[1]=!0,document.getElementById('bg1').style.height='100%',document.getElementById('bg1').style.position='fixed',document.getElementById('bg1').classList.add('ball'),document.getElementById('mainPage').style.display='block',2==navState[0]||3==navState[0]){var g=['help','code'][navState[0]-2];document.getElementById(g+'Art').style.display='none',document.getElementById(g+'Art').style.opacity='0',document.querySelector('.navButtonsCover[data-child="'+g+'"]').style.backgroundColor='transparent',window.scrollTo(0,storeScrollY)}navState[0]===d?setTimeout(function(){navState=[null,!1]},500):setTimeout(function(){navState=[null,!1],handleNavButtons(d)},500)}else if(1==d)location.hash&&(location.href=location.href.split(location.hash)[0]),navState[0]=1;else if(2==d||3==d){storeScrollY=window.scrollY;var g=['help','code'][d-2];document.getElementById('bg1').classList.remove('ball'),document.querySelector('.navButtonsCover[data-child="'+g+'"]').style.backgroundColor='rgba(0,0,0,0.5)',setTimeout(function(){window.scrollTo(0,0),document.getElementById('bg1').style.position='absolute',fx(''+g+'Art').fadeIn(200),document.getElementById('bg1').style.height='auto',document.getElementById('mainPage').style.display='none'},500),setTimeout(function(){navState[1]=!1},700),navState=[d,!0]}else 4==d&&(shareFunc(!0),navState=[4,!0])}var usernameKeyUp=[!1,!1],usernameKeyUpInter=null;function usernameKeyUpFunc(){var d=getText('username');return internet?!d||-1<['Not Found!','Loading.','Loading..','Loading...','Refresh the page'].indexOf(d)?(document.getElementById('suggest').style.display='none',clearInterval(usernameKeyUpInter),usernameKeyUp=[!1,!1],void(isTutorialOn[0]&&tutorial(1))):void ajx('https://www.googleapis.com/youtube/v3/search?part=snippet&q='+encodeURIComponent(d)+'&type=channel&maxResults=5&relevanceLanguage=en&key='+getKey(),function(g){try{if(!g.items)return void noConnection('undef e.items in username keyup (script.js)',!0);if(1>g.pageInfo.totalResults)return;var h=document.querySelectorAll('.suggest'),m=document.querySelectorAll('.suggest div'),o=document.querySelectorAll('.suggestImg');h.forEach(function(p,q){p.style.display='block',p.dataset.id=g.items[q].snippet.channelId.trim()}),isTutorialOn[0]&&tutorial(2),m.forEach(function(p,q){try{p.dataset.id=g.items[q].snippet.channelId.trim(),changeText(p,g.items[q].snippet.title),o[q].style.visibility='hidden'}catch(r){noConnection('texs.forEach: '+r+' (script.js)',!0),h[q].style.display='none'}}),o.forEach(function(p,q){try{p.dataset.id=g.items[q].snippet.channelId.trim(),p.src=g.items[q].snippet.thumbnails.default.url,whenImageLoaded(p).then(function(){p.style.visibility='visible'})}catch(r){noConnection('imas.forEach: '+r+' (script.js)',!0),h[q].style.display='none'}})}catch(p){noConnection('suggest ajx: '+p+' (script.js)',!0)}},function(){noConnection('username keyup no ajx response (script.js)',!0)}):void changeText('username','Refresh the page')}function whenImageLoaded(d){return new Promise(function(g){d.addEventListener('load',g)})}document.getElementById('username').addEventListener('keyup',function(){usernameKeyUp[0]?usernameKeyUp[1]=!0:(usernameKeyUp[0]=!0,usernameKeyUp[1]=!0,document.getElementById('suggest').style.display='block',document.querySelectorAll('.suggest').forEach(function(d,g){0===g?(d.style.display='block',d.childNodes[0].style.visibility='hidden',loading(d.childNodes[1])):d.style.display='none'}),isTutorialOn[0]&&tutorial(2),usernameKeyUpInter=setInterval(function(){usernameKeyUp[1]&&(usernameKeyUpFunc(),usernameKeyUp[1]=!1)},1e3))});function loading(d){d&&-1===loadingList.indexOf(d)?(!loadingList.length&&(loadingInterval=setInterval(function(){loading()},500)),changeText(d,'Loading.'),loadingList.push(d)):loadingList.length?loadingList=loadingList.filter(function(g){var m=['Loading.','Loading..','Loading...'],o=m.indexOf(getText(g));return 0===o||1===o?(changeText(g,m[o+1]),!0):2===o&&(changeText(g,m[0]),!0)}):clearInterval(loadingInterval)}function linkshare(){fx('pageUrl').fadeIn(250),fx('bg2').fadeIn(500),username&&location.hash.split('#!/')[1]||changeText(document.querySelector('#pageUrl input'),'https://youcount.github.io/')}for(var l=50;0<l;l--)views.push(l);function pushViews(d,g){ajx(d,function(h){views[g]=h.items[0].statistics.viewCount,g===2*vids-1&&upCharts()})}function extrabutton(){if(!username)tutorial(0);else if(0===firstload){if(!internet||notFound||isTutorialOn[0])return;loading('showextra');var d='https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id='+username+'&fields=items/contentDetails/relatedPlaylists/uploads&key='+getKey();try{ajx(d,function(g){if(!g.items[0].contentDetails.relatedPlaylists.uploads)return void noConnection('2. undef e.items[0].contentDetails.relatedPlaylists.uploads in extrabutton(script.js)');var h='https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId='+g.items[0].contentDetails.relatedPlaylists.uploads+'&maxResults=50&fields=items/snippet/resourceId/videoId&key='+getKey();ajx(h,function(m){if(!m.items)return void noConnection('3. undef e.items in extrabutton(script.js)');for(var p,o=0;m.items[o];o++)p='https://www.googleapis.com/youtube/v3/videos?part=statistics&id='+m.items[o].snippet.resourceId.videoId+'&fields=items/statistics/viewCount&key='+getKey(),pushViews(p,o);getScript('https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js',function(){isChart=1,fx('showextra').fadeOut(),document.getElementById('hideextra').style.display='block',document.getElementById('extraContent').style.display='block',extraswitch=1;for(var q=[],r=[],u=0;o<vids;u++)q[u]=views[u],r[u]='';var w={labels:r,datasets:[{label:'Views of last '+vids+' videos',fill:!1,borderColor:'rgba(255,50,50,0.5)',pointBorderColor:'rgba(255,50,50,0.5)',pointBackgroundColor:'rgba(255,50,50,1)',data:q}]};myLineChart2=new Chart(document.getElementById('myChart2').getContext('2d'),{type:'line',data:w,gridLines:{display:!1},responsive:!0,maintainAspectRatio:!1});var y=[function(){for(var G=0,H=0;H<vids;H++)G+=+views[H];return G}(),function(){for(var G=0,H=vids;H<2*vids;H++)G+=+views[H];return G}()],z=[Math.floor(y[0]/vids),Math.floor(y[1]/vids)],A=['last '+vids+' videos','last to last '+vids+' videos'];myLineChart3=new Chart(document.getElementById('myChart3').getContext('2d'),{type:'bar',data:{labels:A,datasets:[{label:'Average Views',borderColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],backgroundColor:['rgba(50,50,255,0.2)','rgba(50,255,50,0.2)'],hoverBackgroundColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],data:z}]},gridLines:{display:!1},responsive:!0,maintainAspectRatio:!1});var C=[y[0],y[1]],D=['last '+vids+' videos (total views)','last to last '+vids+' videos (total views)'];myLineChart4=new Chart(document.getElementById('myChart4').getContext('2d'),{type:'doughnut',data:{labels:D,datasets:[{label:'Total Views',borderColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],backgroundColor:['rgba(50,50,255,0.2)','rgba(50,255,50,0.2)'],hoverBackgroundColor:['rgba(0,0,255,1)','rgba(0,255,0,1)'],data:C}]},gridLines:{display:!1},responsive:!0,maintainAspectRatio:!1});var F='https://www.googleapis.com/youtube/v3/channels?part=statistics&id='+username+'&fields=items/statistics(videoCount,viewCount)&key='+getKey();ajx(F,function(G){return G.items[0].statistics.videoCount&&G.items[0].statistics.viewCount?void(changeText(document.getElementById('totalVideos'),G.items[0].statistics.videoCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',')),changeText(document.getElementById('totalViews'),G.items[0].statistics.viewCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,','))):void noConnection('4. undef b.items[0].statistics.videoCount or b.items[0].statistics.viewCount in extrabutton(script.js)')}),firstload=1,upCharts()})})},function(){noConnection('1. extrabutton no response from ajx (script.js)')})}catch(g){noConnection(g)}}else changeText('showextra','Show Stats'),0==extraswitch?(isChart=1,fx('showextra').fadeOut(),fx('hideextra').fadeIn(),document.getElementById('extraContent').style.display='block',extraswitch=1):(myLineChart1.destroy(),fx('showextra').fadeIn(),fx('hideextra').fadeOut(100),document.getElementById('extraContent').style.display='none',extraswitch=0,isChart=0)}function upCharts(){if(!firstload)return void noConnection('upCharts was called before firstload==1',!0);vids=+getText('vids'),25<vids&&changeText('vids',vids=25);for(var d=0,g=0,h=0;h<vids;h++)myLineChart2.data.labels[h]='',myLineChart2.data.datasets[0].data[h]=views[h],d+=+views[h];for(h=vids;h<2*vids;h++)g+=+views[h];myLineChart2.data.labels.splice(vids),myLineChart2.data.datasets[0].data.splice(vids),myLineChart2.data.datasets[0].label='Views of last '+vids+' videos',myLineChart3.data.labels=['last '+vids+' videos','last to last '+vids+' videos'],myLineChart3.data.datasets[0].data[0]=Math.floor(d/vids),myLineChart3.data.datasets[0].data[1]=Math.floor(g/vids),myLineChart4.data.labels=['last '+vids+' videos (total views)','last to last '+vids+' videos (total views)'],myLineChart4.data.datasets[0].data[0]=d,myLineChart4.data.datasets[0].data[1]=g,myLineChart2.update(),myLineChart3.update(),myLineChart4.update()}internet&&document.querySelectorAll('.share').forEach(function(d){d.style.backgroundImage='url(/images/social.png)'});